{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>User Profile</title>
    <link rel="stylesheet" href="{% static 'userprof.css' %}">
    <!-- Inside the <head> tag or just before the closing </body> tag -->
    
    <link rel="apple-touch-icon" href="{% static 'img/logo.png' %}">
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'img/logo.png' %}">

    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/templatemo.css' %}">
    <link rel="stylesheet" href="{% static '/css/custom.css' %}">

    <!-- Load fonts style after rendering the layout styles -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;200;300;400;500;700;900&display=swap">
    <link rel="stylesheet" href="{% static 'css/fontawesome.min.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>
<body>

 <!-- Header -->
 <nav class="navbar navbar-expand-lg ">
    <div class="container d-flex justify-content-between align-items-center">
        <div class="logo">
            <a class="navbar-brand" href="{% url 'index' %}">
                <img src="{% static 'img/gusto.png' %}" alt="Site Logo" class="img-fluid w-auto h-100" style="max-height: 100px;">
            </a>
        </div>
       

        <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#templatemo_main_nav" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="align-self-center collapse navbar-collapse flex-fill  d-lg-flex justify-content-lg-between" id="templatemo_main_nav">
            <div class="flex-fill">
                <ul class="nav navbar-nav d-flex justify-content-between mx-lg-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'index' %}">Home</a>
                    </li>
                    {% comment %} <li class="nav-item">
                        <a class="nav-link" href="{% url 'cust_profile' %}">About</a>
                    </li> {% endcomment %}
                    <li class="nav-item">
                        <a class="nav-link" href="shop.html">Shop</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact</a>
                    </li>
                </ul>
            </div>
            <div class="navbar align-self-center d-flex">
                <div class="d-lg-none flex-sm-fill mt-3 mb-4 col-7 col-sm-auto pr-3">
                    <div class="input-group">
                        <input type="text" class="form-control" id="inputMobileSearch" placeholder="Search ...">
                        <div class="input-group-text">
                            <i class="fa fa-fw fa-search "></i>
                        </div>
                    </div>
                </div>
                <a class="nav-icon d-none d-lg-inline" href="#" data-bs-toggle="modal" data-bs-target="#templatemo_search">
                    <i class="fa fa-fw fa-search text-light mr-2"></i>
                </a>
                <a class="nav-icon position-relative text-decoration-none" href="#">
                    <i class="fa fa-fw fa-cart-arrow-down text-light mr-1"></i>
                    {% comment %} <span class="position-absolute top-0 left-100 translate-middle badge rounded-pill bg-light text-dark">7</span> {% endcomment %}
                </a>
                <a class="nav-icon position-relative text-decoration-none dropdown" href="#" data-bs-toggle="dropdown">
                    <i class="fa fa-fw fa-user text-light mr-1"></i>
                </a>
               
                <div class="dropdown-menu dropdown-menu-end always-show-dropdown" style="min-width: 200px;" aria-labelledby="userDropdown">
                    <a class="dropdown-item" href="{% url 'customer_register' %}" style="color:rgb(2, 48, 2);">Register as Customer</a>
                    <a class="dropdown-item" href="{% url 'seller_register' %}" style="color:rgb(2, 48, 2);">Register as Seller</a>
                </div>
                    {% comment %} <span class="position-absolute top-0 left-100 translate-middle badge rounded-pill bg-light text-dark">+99</span> {% endcomment %}
                
                {% if user.is_authenticated %}
                <h4 class=" text-light">{{user.name}}<h4>
                    <div style="margin-left: 5px;" class="mt-2">
                        <a class="nav-icon position-relative text-decoration-none" href="{% url 'logout' %}" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Logout">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-right" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>
                                <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>
                            </svg>
                        </a>
                {% endif %}
                    </div>
                    
                    
               
            </div>
        </div>

    </div>
</nav>
<!-- Close Header -->

{% if messages %}
<div class="messages">
  {% for message in messages %}
    <div class="alert alert-success">{{ message }}</div>
  {% endfor %}
</div>
{% endif %}

<div class="container ">
<div class="row ">
    <!-- Sidebar -->
    <div class="col-lg-3 mb-4 mt-5 d-flex flex-column shadow-lg" style="background-color: #F8F9F9">
        <!-- Profile Picture -->
        <div class="text-center p-4">
            <img src="{% static 'img/avatar.png' %}" alt="Profile Picture" class="img-fluid rounded-circle mb-3 mt-4" width="100">
            <!-- Greeting -->
            <p class="mb-0"><b>Hello!</b></p>
        </div>
        <div class="list-group mt-3 flex-grow-1">
            <a href="#" class="list-group-item list-group-item-action mb-2">My Addresses</a>
            <a href="#" class="list-group-item list-group-item-action mb-2">My Gifts</a>
            <a href="#" class="list-group-item list-group-item-action mb-2">Payments</a>
            <!-- Add more sidebar items as needed -->
        </div>
    </div>
    
    <div class="col-lg-9 mt-5 ">
        <!-- Main Content -->
        <div class="col-lg-9 shadow-lg">      
            <!-- Form START -->
            <form method="POST" class="file-upload mt-1 " style="background-color: #ffffff;" action="{% url 'customer_profile' %}">
                {% csrf_token %}
                <div class="row mb-5 gx-5">
                    <!-- Contact detail -->
                    <div class="col-xxl-8 mb-5 mb-xxl-0">
                        <div class="bg-secondary-soft px-4 py-5 rounded">
                            <div class="row g-3">
                                <h5 class="mb-4 mt-0">Personal Details</h5>
            
                                <!-- First Name -->
                                <div class="col-md-6">
                                    <label class="form-label">First Name *</label>
                                    <input type="text" class="form-control" id="first_name" name="first_name" placeholder="Enter your First Name" value="{% if form_submitted %}{{ request.POST.first_name }}{% else %}{{ user_profile.first_name }}{% endif %}" {% if not form_submitted %}disabled{% endif %} oninput="validateName(this)">
                                    <div id="first_name_error" class="text-danger"></div>
                                </div>
            
                                <!-- Last Name -->
                                <div class="col-md-6">
                                    <label class="form-label">Last Name *</label>
                                    <input type="text" class="form-control" id="last_name" name="last_name" placeholder="Enter your Last Name" value="{% if form_submitted %}{{ request.POST.last_name }}{% else %}{{ user_profile.last_name }}{% endif %}" {% if not form_submitted %}disabled{% endif %} oninput="validateName(this)">
                                    <div id="last_name_error" class="text-danger"></div>
                                </div>
                            </div> <!-- Row 1 END -->
            
                            <!-- Space -->
                            <div class="mb-3"></div>
            
                            <!-- Mobile number -->
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">Mobile number *</label>
                                    <input type="text" class="form-control" id="mobile_number" name="mobile_number" placeholder="Enter your mobile no." value="{% if form_submitted %}{{ request.POST.mobile_number }}{% else %}{{ user_profile.mobile_number }}{% endif %}" {% if not form_submitted %}disabled{% endif %}>
                                    <div id="mobile_number_error" class="text-danger"></div>
                                </div>
                            </div> <!-- Row 2 END -->
            
                            <!-- Space -->
                            <div class="mb-3"></div>
            
                            <!-- Email -->
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="inputEmail4" class="form-label">Email *</label>
                                    <input type="email" class="form-control" id="inputEmail4" name="email" value="{% if request.user.is_authenticated %}{{ request.user.email }}{% endif %}" disabled>
                                </div>
                            </div> <!-- Row 3 END -->
            
                            <!-- Add margin to move buttons up -->
                            <div class="mt-3"></div>
            
                            <div class="gap-3 d-md-flex justify-content-md-center text-center">
                                <button type="submit" class="btn btn-danger btn" id="save_button">Save</button>
                                <button type="submit" class="btn btn-primary btn" id="update_button">Update</button>
                            </div>
                            
                        </div>
                    </div>
                </div> <!-- Row END -->
            </form>
             <!-- Form END -->
        </div>
    </div>
</div>
</div>
    {% comment %} <footer class="bg-dark" id="tempaltemo_footer">
        <div class="container">
            <div class="row">

                <div class="col-md-4 pt-5">
                    <h2 class="h2 text-success border-bottom pb-3 border-light logo">Zay Shop</h2>
                    <ul class="list-unstyled text-light footer-link-list">
                        <li>
                            <i class="fas fa-map-marker-alt fa-fw"></i>
                            123 Consectetur at ligula 10660
                        </li>
                        <li>
                            <i class="fa fa-phone fa-fw"></i>
                            <a class="text-decoration-none" href="tel:010-020-0340">010-020-0340</a>
                        </li>
                        <li>
                            <i class="fa fa-envelope fa-fw"></i>
                            <a class="text-decoration-none" href="mailto:info@company.com">info@company.com</a>
                        </li>
                    </ul>
                </div>

                <div class="col-md-4 pt-5">
                    <h2 class="h2 text-light border-bottom pb-3 border-light">Products</h2>
                    <ul class="list-unstyled text-light footer-link-list">
                        <li><a class="text-decoration-none" href="#">Luxury</a></li>
                        <li><a class="text-decoration-none" href="#">Sport Wear</a></li>
                        <li><a class="text-decoration-none" href="#">Men's Shoes</a></li>
                        <li><a class="text-decoration-none" href="#">Women's Shoes</a></li>
                        <li><a class="text-decoration-none" href="#">Popular Dress</a></li>
                        <li><a class="text-decoration-none" href="#">Gym Accessories</a></li>
                        <li><a class="text-decoration-none" href="#">Sport Shoes</a></li>
                    </ul>
                </div>

                <div class="col-md-4 pt-5">
                    <h2 class="h2 text-light border-bottom pb-3 border-light">Further Info</h2>
                    <ul class="list-unstyled text-light footer-link-list">
                        <li><a class="text-decoration-none" href="#">Home</a></li>
                        <li><a class="text-decoration-none" href="#">About Us</a></li>
                        <li><a class="text-decoration-none" href="#">Shop Locations</a></li>
                        <li><a class="text-decoration-none" href="#">FAQs</a></li>
                        <li><a class="text-decoration-none" href="#">Contact</a></li>
                    </ul>
                </div>

            </div>

            <div class="row text-light mb-4">
                <div class="col-12 mb-3">
                    <div class="w-100 my-3 border-top border-light"></div>
                </div>
                <div class="col-auto me-auto">
                    <ul class="list-inline text-left footer-icons">
                        <li class="list-inline-item border border-light rounded-circle text-center">
                            <a class="text-light text-decoration-none" target="_blank" href="http://facebook.com/"><i class="fab fa-facebook-f fa-lg fa-fw"></i></a>
                        </li>
                        <li class="list-inline-item border border-light rounded-circle text-center">
                            <a class="text-light text-decoration-none" target="_blank" href="https://www.instagram.com/"><i class="fab fa-instagram fa-lg fa-fw"></i></a>
                        </li>
                        <li class="list-inline-item border border-light rounded-circle text-center">
                            <a class="text-light text-decoration-none" target="_blank" href="https://twitter.com/"><i class="fab fa-twitter fa-lg fa-fw"></i></a>
                        </li>
                        <li class="list-inline-item border border-light rounded-circle text-center">
                            <a class="text-light text-decoration-none" target="_blank" href="https://www.linkedin.com/"><i class="fab fa-linkedin fa-lg fa-fw"></i></a>
                        </li>
                    </ul>
                </div>
                <div class="col-auto">
                    <label class="sr-only" for="subscribeEmail">Email address</label>
                    <div class="input-group mb-2">
                        <input type="text" class="form-control bg-dark border-light" id="subscribeEmail" placeholder="Email address">
                        <div class="input-group-text btn-success text-light">Subscribe</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="w-100 bg-black py-3">
            <div class="container">
                <div class="row pt-2">
                    <div class="col-12">
                        <p class="text-left text-light">
                            Copyright &copy; 2021 Company Name 
                            | Designed by <a rel="sponsored" href="https://templatemo.com" target="_blank">TemplateMo</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>

    </footer>
    <!-- End Footer --> {% endcomment %}

    <!-- Start Script -->
    <script src="{% static 'js/jquery-1.11.0.min.js' %}"></script>
    <script src="{% static 'js/jquery-migrate-1.2.1.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'js/templatemo.js' %}"></script>
    <script src="{% static 'js/custom.js' %}"></script>
    <script src="{% static 'js/profileval.js' %}"></script>

    <!-- End Script -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>





    <script>
        // Add event listeners for input fields
        const firstNameInput = document.querySelector('input[name="first_name"]');
        const lastNameInput = document.querySelector('input[name="last_name"]');
        const mobileNumberInput = document.querySelector('input[name="mobile_number"]');
        const saveButton = document.querySelector('button#save_button');
        const updateButton = document.querySelector('button#update_button');
    
        firstNameInput.addEventListener('input', validateForm);
        lastNameInput.addEventListener('input', validateForm);
        mobileNumberInput.addEventListener('input', validateForm);
    
        function enableInputs(enable) {
            [firstNameInput, lastNameInput, mobileNumberInput].forEach((input) => {
                input.disabled = !enable;
            });
        }
    
        updateButton.addEventListener('click', function (event) {
            event.preventDefault(); // Prevent the form from submitting
    
            // Enable input fields except for email
            enableInputs(true);
    
            // Disable the email field
            emailInput.disabled = true;
        });
    
        function validateForm() {
        const firstName = firstNameInput.value.trim();
        const lastName = lastNameInput.value.trim();
        let mobileNumber = mobileNumberInput.value.trim();
        const firstNameError = document.getElementById('first_name_error');
        const lastNameError = document.getElementById('last_name_error');
        const mobileNumberError = document.getElementById('mobile_number_error');
    
        // Validate First Name
        if (firstName === '') {
            firstNameError.textContent = 'First Name is required';
        } else if (!/^[a-zA-Z]+$/.test(firstName)) {
            firstNameError.textContent = 'Only alphabets are allowed';
        } else {
            firstNameError.textContent = '';
        }
    
        // Validate Last Name
        if (lastName === '') {
            lastNameError.textContent = 'Last Name is required';
        } else if (!/^[a-zA-Z]+$/.test(lastName)) {
            lastNameError.textContent = 'Only alphabets are allowed';
        } else {
            lastNameError.textContent = '';
        }
    
        // Remove spaces and non-digit characters from mobile number
        mobileNumber = mobileNumber.replace(/\D/g, '');
    
        // Automatically add "+91" in front of mobile number if it has 10 digits
        if (mobileNumber.length === 10) {
            mobileNumber = '+91' + mobileNumber;
        }
    
        // Validate Mobile Number
        if (mobileNumber === '') {
            mobileNumberError.textContent = 'Mobile Number is required';
        } else if (!/^\+91\d{10}$/.test(mobileNumber)) {
            mobileNumberError.textContent = 'Mobile Number must start with +91 and have 10 digits';
        } else {
            mobileNumberError.textContent = '';
        }
    
        // Update the input field with the formatted mobile number
        mobileNumberInput.value = mobileNumber;
    
        // Enable or disable buttons based on validation
        if (firstName !== '' && /^[a-zA-Z]+$/.test(firstName) &&
            lastName !== '' && /^[a-zA-Z]+$/.test(lastName) &&
            mobileNumber !== '' && /^\+91\d{10}$/.test(mobileNumber)) {
            saveButton.disabled = false;
            updateButton.disabled = false;
        } else {
            saveButton.disabled = true;
            updateButton.disabled = true;
        }
    }
    </script>
</body>
</html>
